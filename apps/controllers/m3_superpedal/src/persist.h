/*
 * Persists data for M3 pedal
 * Copyright Thorsten Kalz 2009 and Scott Rush 2024
 */

#ifndef _PERSIST_H
#define _PERSIST_H

#include <eeprom.h>


/////////////////////////////////////////////////////////////////////////////
// Global definitions
/////////////////////////////////////////////////////////////////////////////

// EEPROM locations
#define PERSIST_EEPROM_SIZE    EEPROM_EMULATED_SIZE // prepared for up to 4096 entries

/////////////////////////////////////////////////////////////////////////////
// Global Types
/////////////////////////////////////////////////////////////////////////////
typedef enum {
   PERSIST_PEDALS_BLOCK,
   PERSIST_HMI_BLOCK,
   PERSIST_MIDI_PRESETS_BLOCK,
   PERSIST_ARP_BLOCK
} persist_block_t;

/////////////////////////////////////////////////////////////////////////////
// Prototypes
/////////////////////////////////////////////////////////////////////////////

extern s32 PERSIST_Init(u32 mode);

extern s32 PERSIST_StoreBlock(persist_block_t blockType, const unsigned char* pData,u16 length);
extern s32 PERSIST_ReadBlock(persist_block_t block, unsigned char* pData, u16 length);

extern u16 PERSIST_GetStartAddress(persist_block_t blockType);

extern s32 PERSIST_StoreMIDIRouter();
extern void PERSIST_RestoreMidiRouter();

/////////////////////////////////////////////////////////////////////////////
// Export global variables
/////////////////////////////////////////////////////////////////////////////

#endif /* _PERSIST_H */
